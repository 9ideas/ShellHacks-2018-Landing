<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title></title>

    <!--  Gotta make sure this is set so things look good on mobile  -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="icon" href="imgs/sh-square.png">
    <link rel="apple-touch-icon" href="imgs/sh-square.png">
    <meta name="msapplication-TileColor" content="#ff1f8c">
    <meta name="theme-color" content="#ff1f8c">

    <!--BEGIN Schema tags-->
    <meta itemprop="name" content="ShellHacks">
    <meta itemprop="description" content="A Miami-based hackathon run by FIU's UPE Chapter and open to all hackers, both local and abroad!">
    <meta itemprop="image" content="https://cdn.discordapp.com/attachments/399554513767235587/551122355536003082/fullsizeoutput_19a3.jpeg">
    <!--END Schema tags-->

    <!--BEGIN Opengraph-->
    <meta property="og:site_name" content="ShellHacks">
    <meta property="og:url" content="https://shellhacks.net">
    <meta property="og:description" content="ShellHacks, Florida International University's Fall Hackathon!">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://cdn.discordapp.com/attachments/399554513767235587/551122355536003082/fullsizeoutput_19a3.jpeg">
    <meta property="og:image:width" content="auto">
    <meta property="og:image:height" content="367">
    <!--END Opengraph-->

    <!--BEGIN Twitter Card-->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@upefiu">
    <meta name="twitter:title" content="ShellHacks">
    <meta name="twitter:description" content="ShellHacks, Florida International University's Fall Hackathon!">
    <meta name="twitter:image" content="https://cdn.discordapp.com/attachments/399554513767235587/551122355536003082/fullsizeoutput_19a3.jpeg">
    <!--END Twitter Card-->

    <!-- ---  ADDITIONAL RESOURCES BELOW --- -->

    <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Select2 imports -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>

    <!-- CSS Styles -->
    <link rel="stylesheet" href="styles/reset.css">
    <link rel="stylesheet" href="./styles/form.css">
    <link rel="stylesheet" href="./styles/main.css">

</head>

<body>

    <!--Background & decoration objects-->
    <div id="backgroundObjects">

        <div id="shore">
            <div id="wetsand">
                <img id="wetsand3" class="decor" src="imgs/frontpage/wetsand3.svg">
                <img id="wetsand2" class="decor" src="imgs/frontpage/wetsand2.svg">
                <img id="wetsand1" class="decor" src="imgs/frontpage/wetsand1.svg">
            </div>
            <div id="surf">
                <img id="surf3" class="decor" src="imgs/frontpage/surf3.svg">
                <img id="surf2" class="decor" src="imgs/frontpage/surf2.svg">
                <img id="surf1" class="decor" src="imgs/frontpage/surf1.svg">
            </div>
        </div>
    </div>
    <!--Background End-->

    <!-- Main content -->
    <div class="container" id="container">
        <h1 class="brand">Pre-Registration<br /></h1>
        <h3 class="details">Hi there! You are one of the chosen ones who gets to pre-register for Shellhacks.<br />To get started, please fill out the form below.<br /></h3>
        <h3 id="errorMessage" style="display:none">* Something's wrong! Make sure you filled all the fields.</h3>
        <form class="fade-in one" autocomplete="on" id="form">
            <div>
                <label>First Name<br /></label>
                <input class="inputFields" id="fname" placeholder="John" required>
            </div>
            <div>
                <label>Last Name<br /></label>
                <input class="inputFields" id="lname" placeholder="Doe" required>
            </div>
            <div>
                <label>School Email Address<br /></label>
                <input class="inputFields" id="email" type="email" placeholder="roary001@fiu.edu" required>
            </div>
            <div class="selectBox">
                <label class="selectBoxLabel">Any workshops you would like to see?<br /></label>
                <select class="selectpicker" id="workshop" name="states[]" multiple="multiple" data-placeholder="working!">
                    <option disabled>Select at least one</option>
                    <option value="AL">Git</option>
					<option value="WY">Unity</option>
					<option value="AL">Machine Learning</option>
					<option value="WY">ReactJS</option>
					<option value="AL">UI/UX</option>
					<option value="WY">HTML/CSS</option>
					<option value="AL">Swift</option>
					<option value="WY">JavaScript</option>
					<option value="AL">Arduino</option>
					<option value="WY">Unreal Engine</option>
					<option value="AL">TypeScript</option>
					<option value="WY">NodeJS</option>
					<option value="AL">Android Development</option>
					<option value="WY">GraphQL</option>
					<option value="AL">React Native</option>
					<option value="WY">Python</option>
					<option value="AL">Flask</option>
					<option value="WY">Raspberry Pi</option>
					<option value="AL">Amazon Web Services</option>
					<option value="WY">Microsoft Azure</option>
					<option value="AL">Google Cloud Platform</option>
					<option value="WY">Cybersecurity</option>
					<option value="WY">Linux/Unix</option>
				</select>
            </div>
            <div class="selectBox">
                <label class="selectBoxLabel">What about hardware?<br /></label>
                <select class="selectpicker" id="hardware" name="states[]" multiple="multiple">
                    <option disabled>Select at least one</option>
					<option value="AL">Matrix Creators</option>
					<option value="WY">Matrix Voices</option>
					<option value="AL">Arduinos</option>
					<option value="WY">Raspberry Pi Model 3 B+</option>
					<option value="WY">Raspberry Pi Zero</option>
					<option value="AL">3-D printer</option>
				</select>
            </div>
            <div class="selectBox">
                <label class="selectBoxLabel">Activities?<br /></label>
                <select class="selectpicker" id="activity" name="states[]" multiple="multiple">
                    <option disabled>Select at least one</option>
					<option value="AL">Werewolf</option>
					<option value="WY">Yoga</option>
					<option value="WY">Paper Plane Competition</option>
					<option value="WY">Scavenger Hunt</option>
					<option value="AL">Carnival Fishing Game</option>
					<option value="WY">Gaming Lounge</option>
					<option value="AL">Super Smash Bros Tournament</option>
					<option value="WY">Karaoke</option>
					<option value="AL">Cup Stacking</option>
					<option value="WY">4square / Box Ball</option>
					<option value="AL">Soylent Pong</option>
					<option value="WY">Mechanical Keyboard Meetup</option>
					<option value="AL">Dominoes</option>
					<option value="WY">Volleyball</option>
					<option value="AL">Sand Castle Building Contest</option>
					<option value="WY">Team Jeopardy</option>
					<option value="WY">Midnight Campus Hike</option>
				</select>
            </div>
            <div class="selectBox">
                <label class="selectBoxLabel">And swag?<br /></label>
                <select class="selectpicker" id="swag" name="states[]" multiple="multiple">
                    <option disabled>Select at least one</option>
					<option value="AL">Hats</option>
					<option value="WY">Beanies</option>
					<option value="AL">Socks</option>
					<option value="WY">Water Bottles</option>
					<option value="AL">Totebags</option>
					<option value="WY">PopSockets</option>
					<option value="AL">Sunglasses</option>
					<option value="WY">Mugs</option>
					<option value="AL">Keychains</option>
					<option value="WY">Phone Wallets</option>
					<option value="AL">USBs</option>
					<option value="WY">Webcam Covers</option>
					<option value="AL">Lanyards</option>
					<option value="WY">Sleeping Masks</option>
					<option value="AL">Earphones</option>
					<option value="WY">Cards</option>
					<option value="AL">Drink Cozies</option>
					<option value="WY">Coasters</option>
					<option value="AL">Shell Plushies</option>
					<option value="WY">Power Banks</option>
					<option value="WY">Pens</option>
					<option value="WY">Blankets</option>
				</select>
            </div>
            <div>
                <label>Anything else you'd like to see?<br /></label>
                <textarea id="message" placeholder="Drop those sweet ideas/suggestions here"></textarea>
            </div>
            <h3 id="submition" style="display:none">ðŸŽ‰You've been pre-registed. Redirecting in 10 seconds...</h3>
            <div class="bottomButtons">
                <input class="submit" id="submit" type="button" value="Submit">
                <input onclick="location.href = 'index.html';" class="submit" id="cancel" type="button" value="Back">
            </div>
        </form>
    </div>
    <!-- Main Content End -->

    <script src="https://www.gstatic.com/firebasejs/5.8.5/firebase.js"></script>
    <script>
        //----------------select2 multi selection-----
        $(document).ready(function() {
            $('.selectpicker').select2();
        });

        //-----------------listeners dec--------------- 
        const cancelBtn = document.getElementById("cancel");
        const submitBtn = document.getElementById("submit");

        //Initialize Firebase
        const config = {
            apiKey: "AIzaSyBx01mLugiaWjyNLml5NSVs-XX_LgmdP-M",
            authDomain: "shellpre-53931.firebaseapp.com",
            databaseURL: "https://shellpre-53931.firebaseio.com",
            projectId: "shellpre-53931",
            storageBucket: "shellpre-53931.appspot.com",
            messagingSenderId: "413474432056"
        };
        firebase.initializeApp(config);
        var formRef = firebase.database().ref('preRegistration');

        function goHome() {
            window.location.href = "index.html";
        }

        // //gets an element by id 
        function getInputVal(id) {
            const input = document.getElementById(id);

            if (input.value.trim() == null || input.value.trim() == "") {
                $('html, body,div').animate({
                    scrollTop: $("#container").offset().top
                }, 2000);
                $("#errorMessage").show()

            } else {
                $("#errorMessage").hide()
                $("#submition").show()
                return input.value;
            }
        }

        //form validaton
        function validateForm(fname, lname, email) {
            if (fname === "" || fname === null || lname === "" || lname === null || (email === "" || email === null)) {
                return false;
            } else return true;
        }

        //submit form
        function submit(e) {
            // e.preventDefault();
            console.log("Submitting data...");


            //form fields 
            var fname = getInputVal('fname');
            var lname = getInputVal('lname');
            var email = getInputVal('email');
            var message = getInputVal('message');
            var workshops = [];
            var hardware = [];
            var activities = [];
            var swag = [];
            //copying needed values only
            for (const element of $('#workshop')[0].selectedOptions) {
                workshops.push(element.text);
            }

            for (const element of $('#hardware')[0].selectedOptions) {
                hardware.push(element.text)
            }

            for (const element of $('#activity')[0].selectedOptions) {
                activities.push(element.text)
            }

            for (const element of $('#swag')[0].selectedOptions) {
                swag.push(element.text)
            }

            if (validateForm(fname, lname, email)) {
                console.log("Submitting responses...", lname, fname, email, workshops, hardware, activities, swag, message);
                try {
                    saveToFirebase(lname, fname, email, workshops, hardware, activities, swag, message);
                    submitBtn.disabled = "disabled";
                    console.log("Form submitted!");
                    $("body").addClass("nicejob")
                    $(submitBtn).addClass("nicejob")
                    setTimeout(() => {
                        goHome();
                    }, 10000);
                } catch (error) {
                    $('html, body,div').animate({
                        scrollTop: $("#container").offset().top - 20
                    }, 2000)
                    console.error("Error, could not submit:\n", error);
                }
            }
        }

        function Profile(fname, lname, email, workshop, hardware, activities, swag, message) {
            return {
                fname: fname,
                lname: lname,
                email: email,
                workshop: workshop,
                hardware: hardware,
                activities: activities,
                swag: swag,
                message: message,
            }
        }

        //saves the data to fire base
        function saveToFirebase(fname, lname, email, workshop, hardware, activities, swag, message) {
            var newFormRef = formRef.push();
            newFormRef.set(
                Profile(fname, lname, email, workshop, hardware, activities, swag, message));
            submitBtn.disabled = true;

        }

        submitBtn.addEventListener("click", submit)
        cancelBtn.addEventListener("click", goHome)
    </script>
</body>

</html>